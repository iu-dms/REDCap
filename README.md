# REDCap

# 1. Missingness
### A. R Script (REDCapMissingSyntax.R)
  * This script generates a file that contains the REDCap syntax for calculated fields that count the number of missing items per form, accounting for branching logic. The script file <i>REDCapMissingSyntax.R</i> contains code that defines a function named **misscounter**, with the following 4 arguments:
    * dictionaryfile: the data dictionary CSV file for the REDCap project 
    * outpath: the filepath where you would like the syntax file to be written
    * ignoreform: vector of forms to be ignored
    * ignoretype: vector of REDCap field types to be ignored
  * See https://github.com/iu-dms/REDCap/blob/main/Example_Missing.R for an example call of the **misscounter** function.

### B. Output file
   * output file named "missingsyntax_YYYY-MM-DD.csv" will be structured with 1 calculated field per form, and contain the necessary columns to easily add to an existing REDCap data dictionary. The field names will all begin with the prefix "missing_", which will be concatenated with the REDCap form name. These rows can then be quickly pasted into an existing REDCap data dictionary (e.g., and the last row in each form).
      *	Additionally, a second file will be exported named "expectedsyntax_YYYY-MM-DD.csv", which will contain the expected number of items (again accounting for branching logic) that are expected to have responses on each form. These fields can be added similarly as the missing items fields above, but are mainly useful outside of REDCap. For example, if added to a REDCap project, once exported with response data users could calculate the percentage completion of a form, given the expected item count and the missing item count. See the report example for these fields used to create a heatmap table of form completion.

# 2. REDCap-Drilldown
R Script to generate the conditional logic for a drilldown question in REDCap.

### A.	Introduction and Use 
### A.1	Initial Requirements
*	The script relies on commands from the “tidyverse” package which will need to be installed in your instance of Rstudio.

### A.2	General Notes
*	This document provides guidance on how to utilize the basic drilldown question creation code, from R, to generate a zip file suitable to upload in the REDCap Designer that contains the branching logic for the drilldown question type.
*	The branching logic is generated by providing two CSV files, described in Section 2 of this report. The first one contains a four digit code and the corresponding option choices, while the second one contains secondary codes, linked to the first, and the corresponding option choices.
*	Example CSV files are provided. The R code should be “plug-and-play” to produce an upload able ZIP file from properly formatted input files. If, however, you would like to change REDCap related options, that can be done from inside the R code. 

### B.	Defined CSV Input Files
Below are the lists of variables that are required as input columns within the input files. Currently only accepts CSV input files.

### B.1	Required Tier 1 Variables (tier1.csv)
Variable	| Format	| Description
----------|---------|------------
tier1_id	|Numeric (xxxx)	|4 digit reference code for first tier option selection.
tier1_name	|Character	|Name of first tier choice associated with reference code.

### B.2	Required Tier 2 Variables (tier2.csv)
Variable	| Format	| Description
----------|---------|------------
tier1_id	|Numeric (xxxx)	|4 digit reference code for first tier option selection associated with second tier options.
tier2_id	|Numeric (xxxx)	|4 digit reference code for first second option selection.
tier2_name	|Character	|Name of second tier choice associated with reference code.


